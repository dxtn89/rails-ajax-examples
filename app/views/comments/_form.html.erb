<%# NOTE conditionally load an AJAX version of the form  %>
<% if params[:controller] === 'posts' %>
    <%# NOTE I assign the form an ID of `comments-form` so that I can select the form when using javascript in `app/views/comments/create.js.erb`. %>
    <%# NOTE We do not add `local: true` to the form. This is was enables AJAX. %>
    <%= form_with model:[@post, @comment], id: "comments-form" do |f| %>
        <%= render 'comments/form-fields', f: f %>
    <% end  %>
<% else  %>
    <%= form_with model:[@post, @comment], local: true do |f| %>
        <%= render "shared/validation-messages", object: f.object %>
        <%= render 'comments/form-fields', f: f %>
    <% end  %>
<% end  %>


